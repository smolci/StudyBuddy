@model IEnumerable<StudyBuddy.Models.Question>

@{
    ViewData["Title"] = "Questions";
}

<link rel="stylesheet" href="~/css/Index.css" asp-append-version="true" />

<div class="app-shell">
    <main class="main-layout">
        @await Html.PartialAsync("_Sidebar", null)

        <section class="center-column">
            <div class="tasks-card">
                <div class="card-title">QUESTIONS</div>

                <h1 style="margin: 0 0 12px; font-size: 22px; color: var(--text-main);">
                    Your questions
                </h1>

                @if (Model == null || !Model.Any())
                {
                    <div class="task-item" style="justify-content: flex-start;">
                        <div style="color: var(--text-muted); font-size: 14px;">
                            No questions yet.
                        </div>
                    </div>

                    <div style="margin-top: 12px;">
                        <a asp-action="Create" class="btn-add" style="text-decoration:none; display:inline-flex; align-items:center; gap:8px;">
                            + Add question
                        </a>
                    </div>
                }
                else
                {
                    <ul class="task-list">
                        @foreach (var q in Model.OrderBy(q => q.Text))
                        {
                            <li class="task-item" style="align-items: flex-start;">
                                <div style="flex:1;">
                                    <!-- Question row -->
                                    <div style="display:flex; justify-content:space-between; gap:12px; align-items:center;">
                                        <div class="task-left" style="cursor: default;">
                                            <span style="font-weight:600;">@q.Text</span>
                                            <div style="font-size: 13px; color: var(--text-muted); margin-top:2px;">
                                                Topic: @q.Topic?.Name
                                            </div>
                                        </div>

                                        <div style="display:flex; gap:10px; align-items:center;">
                                            <a asp-action="Details" asp-route-id="@q.QuestionId"
                                               class="chip chip-alt" style="text-decoration:none;">
                                                Details
                                            </a>

                                            <a asp-action="Edit" asp-route-id="@q.QuestionId"
                                               class="chip" style="text-decoration:none;">
                                                Edit
                                            </a>

                                            <a asp-action="Delete" asp-route-id="@q.QuestionId"
                                               class="chip" style="text-decoration:none; background:#fde6d7; color:#6a373b;">
                                                Delete
                                            </a>
                                        </div>
                                    </div>

                                    <!-- Answers preview -->
                                    <div style="margin-top:6px; font-size:13px; color:var(--text-muted);">
                                        Correct: @q.CorrectAnswer
                                        @if (!string.IsNullOrEmpty(q.WrongAnswer1)) { <span> | @q.WrongAnswer1</span> }
                                        @if (!string.IsNullOrEmpty(q.WrongAnswer2)) { <span> | @q.WrongAnswer2</span> }
                                        @if (!string.IsNullOrEmpty(q.WrongAnswer3)) { <span> | @q.WrongAnswer3</span> }
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>

                    <div style="margin-top: 14px;">
                        <a asp-action="Create" class="btn-add" style="text-decoration:none; display:inline-flex; align-items:center; gap:8px;">
                            + Add question
                        </a>
                    </div>
                }
            </div>
        </section>
    </main>
</div>
